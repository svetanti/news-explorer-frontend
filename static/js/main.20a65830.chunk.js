(this["webpackJsonpnews-explorer-frontend"]=this["webpackJsonpnews-explorer-frontend"]||[]).push([[0],{28:function(e,t,a){e.exports=a.p+"static/media/github.f734cc7f.svg"},29:function(e,t,a){e.exports=a.p+"static/media/fb.4b12ed39.svg"},31:function(e,t,a){e.exports=a(44)},36:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),c=a.n(o),l=a(7),s=a(17),i=a(23),m=a(2),u=a(1);a(36);function d(e){var t=e.linkClassName,a=e.activeLinkClassName,n=e.path,o=e.children;return r.a.createElement(l.b,{className:"link ".concat(t),activeClassName:a,exact:!0,to:n},o)}function p(e){var t=e.isMenuOpened,a=e.pathname,n="logo ".concat("/"===a||t?"logo_white":"logo_dark");return r.a.createElement(d,{path:"/",linkClassName:"logo__link"},r.a.createElement("h1",{className:n}," NewsExplorer"))}function h(e){var t=e.onMenuClick,a=e.isMenuOpened,n=Object(u.h)().pathname,o="\n    menu-icon \n    ".concat(a?"menu-icon_opened":"menu-icon_closed","\n    ").concat("/"===n?"menu-icon_white":"menu-icon_dark");return r.a.createElement("button",{className:o,onClick:t},r.a.createElement("span",null))}function g(e){var t=e.type,a=e.children,n=e.buttonClassName,o=e.onClick,c=e.disabled;return r.a.createElement("button",{type:t,className:"button ".concat(n),onClick:o,disabled:c},a)}function f(){return r.a.createElement("svg",{className:"signout-icon",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMin slice ",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 6L6 6L6 18H10V20H6C4.89543 20 4 19.1046 4 18V6C4 4.89543 4.89543 4 6 4H10V6ZM17.5856 13L13.2927 17.1339L14.707 18.4958L21.4141 12.0371L14.707 5.57837L13.2927 6.9402L17.5856 11.0741H8V13H17.5856Z",fill:"currentColor"}))}var _=r.a.createContext();function b(e){var t=e.isLoggedIn,a=e.isMenuOpened,o=e.navigationClassName,c=e.pathname,l=e.onClick,s=e.onSignOut,i=Object(n.useContext)(_),m="nav__item ".concat("/"===c||a?"nav__item_white":"nav__item_dark"),u="".concat(m," nav__button ").concat(a?"nav__button_mobile":"");return r.a.createElement("nav",{className:"nav ".concat(o)},r.a.createElement(d,{linkClassName:m,activeLinkClassName:"nav__item_active",path:"/"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),t&&r.a.createElement(d,{linkClassName:m,activeLinkClassName:"nav__item_active",path:"/saved-news"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"),r.a.createElement(g,{buttonClassName:u,isMenuOpened:a,onClick:t?s:l},r.a.createElement("span",{className:"nav__button-text"},t?i.name:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),t&&r.a.createElement(f,null)))}function E(e){var t=e.isLoggedIn,a=e.onClick,o=e.onSignOut,c=Object(n.useState)(!1),l=Object(m.a)(c,2),s=l[0],i=l[1],d=Object(u.h)().pathname,g="header ".concat(s?"header_mobile":""),f="".concat(s?"header__nav_mobile":"");return r.a.createElement("header",{className:g},r.a.createElement(p,{isMenuOpened:s,pathname:d}),r.a.createElement(h,{isMenuOpened:s,onMenuClick:function(){return i(!s)},pathname:d}),r.a.createElement(b,{navigationClassName:f,isLoggedIn:t,isMenuOpened:s,pathname:d,onClick:a,onSignOut:o}))}function v(e){var t=e.name,a=e.formName,n=e.value,o=e.type,c=e.minLength,l=e.maxLength,s=e.required,i=e.autoComplete,m=e.isValid,u=e.onChange,d=e.placeholder,p=e.label,h=e.inputLabelClassName,g=e.inputFieldClassName,f=e.errorMessage,_=e.disabled;return r.a.createElement("label",{className:"input ".concat(h),htmlFor:"".concat(t,"_").concat(a)},p,r.a.createElement("input",{id:"".concat(t,"_").concat(a),type:o,value:n,minLength:c,maxLength:l,required:s,autoComplete:i,onChange:u,className:"input__field ".concat(g),placeholder:d,disabled:_}),r.a.createElement("span",{className:"input__error ".concat(t,"__input-error ").concat(!m&&"".concat(t,"__input-error_active")),id:"".concat(t,"-error")},f))}var w=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(""),c=Object(m.a)(o,2),l=c[0],s=c[1],i=Object(n.useState)(!1),u=Object(m.a)(i,2),d=u[0],p=u[1],h=Object(n.useCallback)((function(e){r(e.target.value),s(e.target.validationMessage),p(e.target.validity.valid)}),[]);return{value:a,setValue:r,errorMessage:l,setErrorMessage:s,isValid:d,setIsValid:p,onChange:h}};function N(e){var t=e.onSearch,a=e.isLoading,n=w();return r.a.createElement("div",{className:"search"},r.a.createElement("div",null,r.a.createElement("h2",{className:"search__heading"},"\u0427\u0442\u043e \u0442\u0432\u043e\u0440\u0438\u0442\u0441\u044f \u0432\xa0\u043c\u0438\u0440\u0435?"),r.a.createElement("p",{className:"search__subtitle"},"\u041d\u0430\u0445\u043e\u0434\u0438\u0442\u0435 \u0441\u0430\u043c\u044b\u0435 \u0441\u0432\u0435\u0436\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438 \u043d\u0430\xa0\u043b\u044e\u0431\u0443\u044e \u0442\u0435\u043c\u0443 \u0438\xa0\u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0439\u0442\u0435 \u0432\xa0\u0441\u0432\u043e\u0451\u043c \u043b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435.")),r.a.createElement("form",{className:"search__form",onSubmit:function(e){var a=n.value,r=n.setErrorMessage;e.preventDefault(),t(a,r)},noValidate:!0},r.a.createElement(v,Object.assign({name:"search",type:"text"},n,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043c\u0443 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",disabled:a,inputFieldClassName:"search__input-field",inputLabelClassName:"search__input"})),r.a.createElement(g,{type:"submit",buttonClassName:"search__button"},"\u0418\u0441\u043a\u0430\u0442\u044c")))}function C(){return r.a.createElement("section",{className:"about"},r.a.createElement("img",{src:"https://images.unsplash.com/photo-1490650034439-fd184c3c86a5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2000&q=80",alt:"\u0410\u0432\u0442\u043e\u0440 \u043f\u0440\u043e\u0435\u043a\u0442\u0430",className:"about__image"}),r.a.createElement("div",{className:"about__text"},r.a.createElement("h2",{className:"about__heading"},"\u041e\u0431 \u0430\u0432\u0442\u043e\u0440\u0435"),r.a.createElement("p",{className:"about__info"},"\u042d\u0442\u043e \u0431\u043b\u043e\u043a \u0441\xa0\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c \u0430\u0432\u0442\u043e\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430. \u0417\u0434\u0435\u0441\u044c \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u0442\u044c, \u043a\u0430\u043a \u0432\u0430\u0441 \u0437\u043e\u0432\u0443\u0442, \u0447\u0435\u043c \u0432\u044b\xa0\u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442\u0435\u0441\u044c, \u043a\u0430\u043a\u0438\u043c\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u044f\u043c\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0432\u043b\u0430\u0434\u0435\u0435\u0442\u0435."),r.a.createElement("p",{className:"about__info"},"\u0422\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043e\xa0\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u0432\xa0\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c\u0435, \u0447\u0435\u043c\u0443 \u0432\u044b\xa0\u0442\u0443\u0442 \u043d\u0430\u0443\u0447\u0438\u043b\u0438\u0441\u044c, \u0438\xa0\u0447\u0435\u043c \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043c\u043e\u0447\u044c \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u043c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c.")))}function O(){return r.a.createElement("div",{className:"preloader__wrapper"},r.a.createElement("div",{className:"preloader"},r.a.createElement("i",{className:"preloader__spinner"}),r.a.createElement("span",{className:"preloader__text"},"\u0418\u0434\u0435\u0442 \u043f\u043e\u0438\u0441\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439...")))}function j(e){var t=e.pathname,a=e.isSaved;return r.a.createElement(r.a.Fragment,null,"/"===t&&!a&&r.a.createElement("svg",{className:"card-button-icon card-button-icon_bookmark",width:"14",height:"19",viewBox:"0 0 14 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M6.38218 12.7137L1 16.9425V1L13 1V16.9425L7.61782 12.7137L7 12.2283L6.38218 12.7137Z",strokeWidth:"2"})),"/"===t&&a&&r.a.createElement("svg",{className:"card-button-icon card-button-icon_saved",width:"14",height:"19",viewBox:"0 0 14 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M0 1C0 0.447715 0.447715 0 1 0H13C13.5523 0 14 0.447715 14 1V19L7 13.5L0 19V1Z"})),"/"!==t&&r.a.createElement("svg",{className:"card-button-icon card-button-icon_bin",width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 0H6V2H0V4H18V2H12V0ZM2 6V17C2 18.1046 2.89543 19 4 19H14C15.1046 19 16 18.1046 16 17V6H14V17H4V6H2ZM6 6L6 15H8L8 6H6ZM10 6V15H12V6H10Z"})))}var k=r.a.createContext();function y(e){var t=e.isLoggedIn,a=e.onCardClick,o=e.article,c=o.keyword,l=o.title,s=o.description,i=o.publishedAt,m=o.url,d=o.urlToImage,p=o.source,h=Object(n.useContext)(k).savedNews,g=Object(u.h)().pathname,f=t&&h.some((function(e){return e.publishedAt===o.publishedAt&&e.title===o.title})),_=new Date(i),b=_.toLocaleString("ru",{month:"long",day:"numeric"})+", "+_.getFullYear(),E=t?"".concat(f&&"\u0423\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445"):"\u0412\u043e\u0439\u0434\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u0438";return r.a.createElement("li",{className:"card"},"/saved-news"===g&&r.a.createElement("span",{className:"card__element card__keyword"},c),r.a.createElement("button",{type:"button",className:"card__element card__button",onClick:function(){a(o)}},r.a.createElement(j,{pathname:g,isSaved:f})),(!t||t&&f)&&r.a.createElement("span",{className:"card__element card__tooltip"},E),r.a.createElement("div",{className:"card__img-wrapper"},r.a.createElement("img",{src:d,alt:l,className:"card__image"})),r.a.createElement("div",{className:"card__content"},r.a.createElement("span",{className:"card__date"},b),r.a.createElement("h2",{className:"card__title"},l),r.a.createElement("p",{className:"card__text"},s),r.a.createElement("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"card__source"},"/"===g?p.name:p)))}function L(e){var t=e.isLoggedIn,a=e.onCardClick,n=e.newsToRender,o=e.savedNews;return r.a.createElement("section",{className:"news-card-list"},r.a.createElement("ul",{className:"news-card-list__wrapper"},n.map((function(e,n){return r.a.createElement(y,{article:e,key:n,isLoggedIn:t,savedNews:o,onCardClick:a})}))))}var S={year:"numeric",month:"2-digit",day:"2-digit"},x=new Intl.DateTimeFormat("fr-CA",S).format(Date.now()-6048e5),V=new Intl.DateTimeFormat("fr-CA",S).format(Date.now()),I={baseUrl:"https://nomoreparties.co/news/v2/everything",from:"from=".concat(x),to:"to=".concat(V),pageSize:"pageSize=100",apiKey:"apiKey=19a7ee150200415abfcf6899be597e77",headers:{"Content-Type":"application/x-www-form-urlencoded"}},M="https://api.newnews.students.nomoreparties.xyz";function F(e){var t=e.onSearch,a=e.isLoggedIn,o=e.isLoading,c=e.onCardClick,l=e.onShowMore,s=e.isSearchOk,i=e.currentRow,m=e.isError,u=Object(n.useContext)(k),d=u.news,p=u.savedNews,h=d.slice(0,3*(i+1));return r.a.createElement("section",{className:"main"},r.a.createElement(N,{onSearch:t,isLoading:o}),o&&r.a.createElement(O,null),s&&r.a.createElement("div",{className:"main__news-container"},h.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"main__news-heading"},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430"),r.a.createElement(L,{newsToRender:h,isLoggedIn:a,savedNews:p,onCardClick:c,currentRow:i}),h.length!==d.length&&r.a.createElement(g,{buttonClassName:"main__show-more",onClick:l},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435")):r.a.createElement("div",{className:"main__not-found"},r.a.createElement("span",{className:"main__not-found-icon"}),r.a.createElement("h3",{className:"main__not-found-heading"},"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),r.a.createElement("p",{className:"main__not-found-text"},"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."))),m&&r.a.createElement("div",{className:"main__news-container"},r.a.createElement("div",{className:"main__not-found"},r.a.createElement("h3",{className:"main__not-found-heading"},"\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430."),r.a.createElement("p",{className:"main__not-found-text"},"\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437"))),r.a.createElement(C,null))}function T(e){var t,a=e.isLoggedIn,o=Object(n.useContext)(_),c=Object(n.useContext)(k).savedNews,l=a?c.map((function(e){return e.keyword})):[],i=Object(s.a)(new Set(l)).map((function(e){var t={};return t.keyword=e,t.quantity=l.filter((function(t){return t===e})).length,t})).sort((function(e,t){return t.quantity-e.quantity})).map((function(e){return e.keyword})),m=i.length<=3?i.join(", "):"".concat(i.slice(0,3).join(", ")," \u0438 ").concat(i.slice(3).length,"-").concat((t=i,["\u043c\u0443","\u043c","\u0438"][t.slice(3).length%10===1&&t.slice(3).length%100!==11?0:t.slice(3).length%10>=2&&t.slice(3).length%10<=4&&(t.slice(3).length%100<10||t.slice(3).length%100>=20)?1:2])," ").concat(function(e){return["\u0434\u0440\u0443\u0433\u043e\u043c\u0443","\u0434\u0440\u0443\u0433\u0438\u043c"][e.slice(3).length%10===1&&e.slice(3).length%100!==11?0:1]}(i));return r.a.createElement("div",{className:"saved-news-header"},r.a.createElement("p",{className:"saved-news-header__title"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"),r.a.createElement("h2",{className:"saved-news-header__heading"},o.name,", \u0443 \u0432\u0430\u0441 ",c.length," \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 ",function(e){return["\u0441\u0442\u0430\u0442\u044c\u044f","\u0441\u0442\u0430\u0442\u044c\u0438","\u0441\u0442\u0430\u0442\u0435\u0439"][(e.length,e.length%10>=2&&e.length%10<=4&&(e.length%100<10||e.length%100>=20)?1:2)]}(c)),r.a.createElement("p",{className:"saved-news-header__keywords-list"},"\u041f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c:\xa0",r.a.createElement("span",{className:"saved-news-header__keywords"},m)))}function A(e){var t=e.isLoggedIn,a=e.onCardClick,o=Object(n.useContext)(k).savedNews;return r.a.createElement("div",{className:"saved-news"},r.a.createElement(T,{isLoggedIn:t}),r.a.createElement(L,{newsToRender:o,isLoggedIn:t,onCardClick:a}))}var H=a(28),B=a.n(H),R=a(29),q=a.n(R);function D(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 ",(new Date).getFullYear()," Supersite, Powered by News API"),r.a.createElement("ul",{className:"footer__links"},r.a.createElement("li",null,r.a.createElement(d,{path:"/",linkClassName:"footer__link"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),r.a.createElement("li",null,r.a.createElement("a",{className:"footer__link",href:"https://praktikum.yandex.ru/",target:"_blank",rel:"noopener noreferrer"},"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"))),r.a.createElement("ul",{className:"footer__social"},r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/svetanti",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{className:"footer__social-icon",src:B.a,alt:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 GitHub"}))),r.a.createElement("li",null,r.a.createElement("a",{href:"https://www.facebook.com/svetlana.antipova.399",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{className:"footer__social-icon",src:q.a,alt:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 Facebook"})))))}function z(e){var t=e.isOpen,a=e.onSubmit,n=e.onClose,o=e.formName,c=e.onChangeForm,l=e.children,s=e.submitButtonText,i=e.isFormValid,m=e.authError,u=e.disabled;return r.a.createElement("div",{className:"popup popup_type_".concat(o," ").concat(t&&"popup_opened")},r.a.createElement("div",{className:"popup__overlay",onClick:n}),r.a.createElement("form",{className:"popup__form ".concat(o,"__form"),name:o,onSubmit:a},r.a.createElement("button",{type:"reset",className:"popup__close-button",onClick:n}),r.a.createElement("fieldset",{className:"popup__input-container",disabled:u},l),"tooltip"!==o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"popup__error"},m),r.a.createElement(g,{buttonClassName:"popup__submit",onClick:a,disabled:!i},s)),r.a.createElement("span",{className:"popup__subtitle"},"tooltip"!==o&&"\u0438\u043b\u0438 ",r.a.createElement("span",{className:"popup__link",onClick:c},"login"!==o?"\u0412\u043e\u0439\u0442\u0438":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))}function J(e){var t=e.isOpen,a=e.onClose,n=e.onChangeForm,o=e.onLogin,c=e.authError,l=e.disabled,s=w(),i=w();return r.a.createElement(z,{formName:"login",isOpen:t,onClose:function(){s.setErrorMessage(""),s.setValue(""),i.setErrorMessage(""),i.setValue(""),s.setIsValid(!1),i.setIsValid(!1),a()},onChangeForm:n,isFormValid:s.isValid&&i.isValid,onSubmit:function(e){e.preventDefault(),o(s.value,i.value)},authError:c,disabled:l,submitButtonText:"\u0412\u043e\u0439\u0442\u0438"},r.a.createElement("legend",{className:"popup__heading"},"\u0412\u0445\u043e\u0434"),r.a.createElement(v,Object.assign({label:"Email",name:"email",formName:"log",type:"email",minLength:"6",maxLength:"30",required:!0,autoComplete:"email"},s,{inputLabelClassName:"popup__input-label",inputFieldClassName:"popup__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"})),r.a.createElement(v,Object.assign({label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",formName:"log",type:"password",minLength:"8",maxLength:"30",required:!0,autoComplete:"password"},i,{inputLabelClassName:"popup__input-label",inputFieldClassName:"popup__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})))}function P(e){var t=e.isOpen,a=e.onClose,n=e.onChangeForm,o=e.onRegister,c=e.authError,l=e.disabled,s=w(),i=w(),m=w();return r.a.createElement(z,{formName:"registration",isOpen:t,onClose:function(){s.setErrorMessage(""),s.setValue(""),m.setErrorMessage(""),m.setValue(""),i.setErrorMessage(""),i.setValue(""),s.setIsValid(!1),m.setIsValid(!1),i.setIsValid(!1),a()},onChangeForm:n,isFormValid:s.isValid&&m.isValid&&i.isValid,onSubmit:function(e){e.preventDefault(),o(s.value,m.value,i.value)},authError:c,disabled:l,submitButtonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"},r.a.createElement("legend",{className:"popup__heading"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement(v,Object.assign({label:"Email",name:"email",formName:"reg",minLength:"6",maxLength:"30",type:"email",required:!0,autoComplete:"email"},s,{inputLabelClassName:"popup__input-label",inputFieldClassName:"popup__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"})),r.a.createElement(v,Object.assign({label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",formName:"reg",minLength:"8",maxLength:"30",type:"password",required:!0,autoComplete:"password"},m,{inputLabelClassName:"popup__input-label",inputFieldClassName:"popup__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})),r.a.createElement(v,Object.assign({label:"\u0418\u043c\u044f",name:"name",formName:"reg",minLength:"2",maxLength:"30",type:"text",required:!0},i,{inputLabelClassName:"popup__input-label",inputFieldClassName:"popup__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f"})))}function Z(e){var t=e.isOpen,a=e.onClose,n=e.onChangeForm;return r.a.createElement(z,{formName:"tooltip",isOpen:t,onClose:a,onChangeForm:n},r.a.createElement("legend",{className:"popup__heading"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d!"))}var W=a(30),G=function(e){var t=e.component,a=Object(W.a)(e,["component"]);return r.a.createElement(u.b,null,(function(){return a.isLoggedIn?r.a.createElement(t,a):r.a.createElement(u.a,{from:"/saved-news",to:"/"})}))},K=I.baseUrl,Y=I.from,U=I.to,Q=I.pageSize,$=I.apiKey,X=I.headers;function ee(e){return function(e,t){return fetch("".concat(K,"?q=").concat(e,"&").concat(Y,"&").concat(U,"&").concat(Q,"&").concat($),t).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}(e,{headers:X})}var te=a(14),ae=a(15),ne=a(18),re=a(19),oe=function(e){Object(ae.a)(a,e);var t=Object(ne.a)(a);function a(e){var n;Object(te.a)(this,a);for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];return(n=t.call.apply(t,[this].concat(o))).status=400,n.message=e,n}return a}(Object(re.a)(Error)),ce=function(e){Object(ae.a)(a,e);var t=Object(ne.a)(a);function a(e){var n;Object(te.a)(this,a);for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];return(n=t.call.apply(t,[this].concat(o))).status=401,n.message=e,n}return a}(Object(re.a)(Error)),le=function(e){return fetch("".concat(M,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw new ce(e.message)}))})).then((function(e){return e}))};function se(){var e=a(42),t=Object(n.useState)(!1),o=Object(m.a)(t,2),c=o[0],l=o[1],d=Object(n.useState)({}),p=Object(m.a)(d,2),h=p[0],g=p[1],f=Object(n.useState)(!1),b=Object(m.a)(f,2),v=b[0],w=b[1],N=Object(n.useState)(!1),C=Object(m.a)(N,2),O=C[0],j=C[1],y=Object(n.useState)(!1),L=Object(m.a)(y,2),S=L[0],x=L[1],V=Object(n.useState)(""),I=Object(m.a)(V,2),T=I[0],H=I[1],B=Object(n.useState)(!1),R=Object(m.a)(B,2),q=R[0],z=R[1],W=Object(n.useState)(!1),K=Object(m.a)(W,2),Y=K[0],U=K[1],Q=Object(n.useState)(!1),$=Object(m.a)(Q,2),X=$[0],te=$[1],ae=Object(n.useState)(0),ne=Object(m.a)(ae,2),re=ne[0],se=ne[1],ie=Object(n.useState)([]),me=Object(m.a)(ie,2),ue=me[0],de=me[1],pe=Object(n.useState)([]),he=Object(m.a)(pe,2),ge=he[0],fe=he[1],_e=Object(n.useState)(!1),be=Object(m.a)(_e,2),Ee=be[0],ve=be[1],we=Object(u.g)(),Ne=Object(u.h)().pathname;function Ce(){w(!1),j(!1),x(!1),H("")}function Oe(){H(""),j(!O),w(!v)}function je(){fetch("".concat(M,"/articles"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return e.json()})).then((function(e){return fe(e.data)})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439: ".concat(e.message))}))}function ke(e){var t;(t=e._id,fetch("".concat(M,"/articles/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}})).then((function(){return fe(ge.filter((function(t){return t._id!==e._id})))})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438: ".concat(e))}))}return Object(n.useEffect)((function(){!c&&"/saved-news"===Ne&&j(!0)}),[c,Ne]),Object(n.useEffect)((function(){var e=localStorage.getItem("jwt");e&&le(e).then((function(e){l(!0),g(e.data),je()})).catch((function(e){return console.log(e)}))}),[]),Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("news"));e&&e.length&&(de(e),te(!0))}),[]),Object(n.useEffect)((function(){function e(e){"Escape"!==e.key&&"Esc"!==e.key||Ce()}return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}),[]),r.a.createElement(_.Provider,{value:h},r.a.createElement(k.Provider,{value:{news:ue,savedNews:ge}},r.a.createElement("div",{className:"app"},r.a.createElement(E,{isLoggedIn:c,onClick:function(){j(!0)},onSignOut:function(){l(!1),localStorage.removeItem("jwt"),g({}),we.push("/")}}),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/"},r.a.createElement(F,{onSearch:function(e,t){e?(z(!0),te(!1),de([]),se(0),ee(e).then((function(t){var a=t.articles.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{keyword:e})}));de(a),localStorage.setItem("news",JSON.stringify(a)),te(!0),U(!1)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439: ".concat(e)),U(!0)})).finally((function(){return z(!1)}))):t("\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e")},isLoggedIn:c,isLoading:q,isError:Y,onCardClick:function(e){if(!c)return w(!0);var t=ge.find((function(t){return t.publishedAt===e.publishedAt&&t.title===e.title}));t?ke(t):function(e){var t=e.keyword,a=e.title,n=e.description,r=e.publishedAt,o=e.source,c=e.url,l=e.urlToImage;return fetch("".concat(M,"/articles"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},credentials:"include",body:JSON.stringify({keyword:t,title:a,description:n,publishedAt:r,source:o.name,url:c,urlToImage:l})}).then((function(e){return e.json()}))}(e).then((function(e){return fe([e.data].concat(Object(s.a)(ge)))})).catch((function(e){return console.log(e)}))},onShowMore:function(){se(re+1)},isSearchOk:X,currentRow:re})),r.a.createElement(G,{path:"/saved-news",component:A,isLoggedIn:c,onCardClick:ke})),r.a.createElement(D,null),r.a.createElement(P,{isOpen:v,onClose:Ce,onChangeForm:Oe,onRegister:function(t,a,n){ve(!0),function(e,t,a){return fetch("".concat(M,"/signup"),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Credentials":!0},body:JSON.stringify({email:e,password:t,name:a})}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw e.error?new oe(e.error):new oe(e.message)}))}))}(t,e(a),n).then((function(e){w(!1),x(!0)})).catch((function(e){return H(e.message)})).finally((function(){return ve(!1)}))},authError:T}),r.a.createElement(J,{isOpen:O,onClose:Ce,onChangeForm:Oe,authError:T,onLogin:function(t,a){ve(!0),function(e,t){return fetch("".concat(M,"/signin"),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Credentials":!0},credentials:"include",body:JSON.stringify({email:e,password:t})}).then((function(e){if(400===e.status)throw new oe("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439");if(401===e.status)throw new ce("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d");return e.json()})).then((function(e){if(e.token)return localStorage.setItem("jwt",e.token),e.token}))}(t,e(a)).then((function(e){le(e).then((function(e){return g(e.data)})).catch((function(e){return H(e.message)})),l(!0),j(!1),je()})).catch((function(e){return H(e.message)})).finally((function(){return ve(!1)}))},disabled:Ee}),r.a.createElement(Z,{isOpen:S,onClose:Ce,onChangeForm:function(){H(""),x(!1),j(!0)},disabled:Ee}))))}a(43),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(se,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.20a65830.chunk.js.map